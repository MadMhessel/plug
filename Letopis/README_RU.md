# Letopis — «Летопись мира»

Плагин добавляет «живой мир» с 4 шкалами напряжения, предвестниками и событиями.
Работает на Paper/Spigot 1.20.1+ (JDK 17, без NMS), хранение — SQLite.

## Сборка
### Вариант 1 — IntelliJ IDEA
1. Откройте папку проекта как Gradle-проект.
2. Дождитесь загрузки зависимостей.
3. Выполните задачу Gradle: `build`.
4. Готовый файл: `build/libs/Letopis-1.0.1.jar`.

### Вариант 2 — через Gradle
Если Gradle установлен:
```bash
gradle build
```

## Установка на сервер
1. Положите `Letopis-1.0.1.jar` в папку `plugins/`.
2. Запустите сервер.
3. Проверьте, что появились:
   - `plugins/Letopis/config.yml`
   - `plugins/Letopis/messages.yml`
   - `plugins/Letopis/letopis.db`

## Команды игрока
- `/letopis` — меню состояния мира (4 шкалы).
- `/letopis journal [стр]` — журнал событий.
- `/letopis contribute` — вклад за сутки.
- `/letopis effects` — вкл/выкл косметики.
- `/letopis title [название|off]` — управление титулами.

## Команды администратора
- `/letopis admin status` — состояние по мирам.
- `/letopis admin set <world> <scale> <value>` — установить шкалу.
- `/letopis admin add <world> <scale> <delta>` — изменить шкалу.
- `/letopis admin start <world> <scale>` — принудительно стартовать событие.
- `/letopis admin stop <world>` — остановить событие.
- `/letopis admin reload` — перечитать конфиг и сообщения.
- `/letopis admin export` — экспортировать журнал и состояние в JSON (папка `export/`).
- `/letopis admin givecodex <player>` — выдать «Кодекс Летописи».

## Алтарь Летописи (ритуал)
1. Основание: `CHISELED_STONE_BRICKS` под кафедрой.
2. На кафедре — «Кодекс Летописи».
3. По сторонам света — 4 свечи (любой цвет).
4. ПКМ по кафедре — меню ритуала.

## Что делает плагин
- Шкалы Шум/Пепел/Чаща/Разлом с естественным спадом.
- Предвестники и BossBar в мире.
- События с волнами/мини-боссами без разрушений.
- Успокоение через ритуал.
- Журнал событий и экспорт JSON.
- Трофеи, печати и титулы.

## Файлы настроек
- `config.yml` — все числовые значения, лимиты, пороги и награды.
- `messages.yml` — тексты сообщений.

## Частые проблемы
- Проверьте, что используется Paper 1.20.1+ и JDK 17.
- Если события не запускаются, убедитесь что шкалы не на нуле и мир включён в `general.worlds`.
